{"version":3,"sources":["../src/timer.js"],"names":["define","$","setup","document","ready","time","val","console","log","timer","remaining","m","Math","floor","s","getElementById","innerHTML","setTimeout","alert","removeAttr"],"mappings":"AASAA,OAAM,kBAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,mBAAxB,CAAD,CACF,SAAUC,CAAV,CAAa,CACb,MAAO,CACHC,KAAK,CAAE,gBAAY,CACfD,CAAC,CAACE,QAAD,CAAD,CAAYC,KAAZ,CAAkB,UAAW,CACzB,GAAIC,CAAAA,CAAI,CAAGJ,CAAC,CAAC,gBAAD,CAAD,CAAoBK,GAApB,EAAX,CACAC,OAAO,CAACC,GAAR,CAAYH,CAAZ,EACA,GAAIA,CAAJ,CAAS,CACLI,CAAK,CAACJ,CAAD,CACR,CACJ,CAND,EAQA,QAASI,CAAAA,CAAT,CAAeC,CAAf,CAAyB,IAGjBC,CAAAA,CAAC,CAAGC,IAAI,CAACC,KAAL,CAAWH,CAAS,CAAG,EAAvB,CAHa,CAIjBI,CAAC,CAAGJ,CAAS,CAAG,EAJC,CAKrBC,CAAC,CAAO,EAAJ,CAAAA,CAAC,CAAQ,IAAMA,CAAd,CAAkBA,CAAvB,CACAG,CAAC,CAAO,EAAJ,CAAAA,CAAC,CAAQ,IAAMA,CAAd,CAAkBA,CAAvB,CACAX,QAAQ,CAACY,cAAT,CAAwB,OAAxB,EAAiCC,SAAjC,CAA6CL,CAAC,CAAG,GAAJ,CAAUG,CAAvD,CACAJ,CAAS,EAAI,CAAb,CACA,GAAiB,CAAb,EAAAA,CAAS,IAAb,CAA+B,CAC3BO,UAAU,CAAC,UAAY,CACnBR,CAAK,CAACC,CAAD,CACR,CAFS,CAEP,GAFO,CAAV,CAGA,MACH,CAMDQ,KAAK,CAAC,iBAAD,CAAL,CACAjB,CAAC,CAAC,UAAD,CAAD,CAAckB,UAAd,CAAyB,UAAzB,EACAhB,QAAQ,CAACY,cAAT,CAAwB,OAAxB,EAAiCC,SAAjC,CAA6C,aAChD,CAED,QACH,CApCE,CAsCV,CAxCK,CAAN","sourcesContent":["\n/**\n * Javascript controller for the \"Actions\" panel at the bottom of the page.\n *\n * @module     auth_otp/otp\n * @copyright  2021 Brain station 23 <damyon@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @since      3.1\n */\ndefine(['jquery', 'core/ajax', 'core/notification'],\n    function ($) {\n    return {\n        setup: function () {\n            $(document).ready(function (){\n                let time = $('#otptimeoutval').val();\n                console.log(time);\n                if (time){\n                    timer(time);\n                }\n            });\n\n            function timer(remaining){\n                let timerOn = true;\n\n                var m = Math.floor(remaining / 60);\n                var s = remaining % 60;\n                m = m < 10 ? '0' + m : m;\n                s = s < 10 ? '0' + s : s;\n                document.getElementById('timer').innerHTML = m + ':' + s;\n                remaining -= 1;\n                if (remaining >= 0 && timerOn) {\n                    setTimeout(function () {\n                        timer(remaining);\n                    }, 1000);\n                    return;\n                }\n                if (!timerOn) {\n                    // Do validate stuff here\n                    return;\n                }\n                // Do timeout stuff here\n                alert('Timeout for otp');\n                $('#sendotp').removeAttr('disabled');\n                document.getElementById('timer').innerHTML = 'Resend Code';\n            }\n\n            return true;\n        }\n    };\n});"],"file":"timer.min.js"}