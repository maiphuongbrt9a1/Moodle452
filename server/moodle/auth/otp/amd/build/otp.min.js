define ("auth_otp/otp",["jquery","core/ajax","core/notification"],function(a,b,c){a("#sendotp").click(function(){var d=a(".iti__selected-dial-code").html(),e=d+a("#phone").val();a("input[name=\"full_number\"]").val(e);var f=a("#phone").val();if(f){alert(e);if(/^\+[1-9]{1}[0-9]{3,14}$/.test(e)){var g=function(b){var c=Math.floor(b/60),d=b%60;c=10>c?"0"+c:c;d=10>d?"0"+d:d;document.getElementById("timer").innerHTML=c+":"+d;b-=1;if(0<=b&&h){setTimeout(function(){g(b)},1e3);return}if(!h){return}alert("Timeout for otp");a("#sendotp").removeAttr("disabled");document.getElementById("timer").innerHTML="Resend Code";a("#sendotp").removeClass("d-none")},h=!0;try{b.call([{methodname:"auth_otp_send_sms",args:{phone:f,countrycode:d}}])[0].done(function(b){if(1==b.success){a("#otp-field").removeClass("d-none");a("#sendotp").attr("disabled","disabled");a("#phone").attr("disabled","disabled");a("#phone").val(f);a("#username").val(f);g(300);c.addNotification({message:b.message,type:"success"})}else{c.addNotification({message:"Something went wrong to send otp Please Try again !!",type:"error"})}}).fail(c.exception)}catch(a){console.log(a)}}else{c.addNotification({message:"insert Valid Phone number !!",type:"error"})}}else{c.addNotification({message:"phone number can't be empty",type:"error"})}return!1})});
//# sourceMappingURL=otp.min.js.map
