<?xml version="1.0" encoding="UTF-8" ?>
<XMLDB PATH="local/children_management/db" VERSION="20250606" COMMENT="XMLDB file for Moodle local/children_management"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>
  <TABLES>
    <TABLE NAME="children_and_parent_information" COMMENT="Children of parent">
        <FIELDS>
            <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
            <FIELD NAME="parentid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/> <!-- Liên kết tới user -->
            <FIELD NAME="childrenid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/> <!-- Liên kết tới user -->
            <FIELD NAME="createtime" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
            <FIELD NAME="lastmodifytime" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
        </FIELDS>
        <KEYS>
            <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
            <KEY NAME="parent_fk" TYPE="foreign" FIELDS="parentid" REFTABLE="user" REFFIELDS="id"/>
            <KEY NAME="child_fk" TYPE="foreign" FIELDS="childrenid" REFTABLE="user" REFFIELDS="id"/>
        </KEYS>
        <INDEXES>
            <INDEX NAME="parentid_idx" UNIQUE="false" FIELDS="parentid"/>
            <INDEX NAME="childrenid_idx" UNIQUE="false" FIELDS="childrenid"/>
        </INDEXES>
    </TABLE>
    <TABLE NAME="local_children_management_otp_code" COMMENT="Save otp code for each time parent add new children">
        <FIELDS>
            <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
            <FIELD NAME="parentid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/> <!-- Liên kết tới user -->
            <FIELD NAME="childrenid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/> <!-- Liên kết tới user -->
            <FIELD NAME="otpcode" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
            <FIELD NAME="createtime" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
            <FIELD NAME="timeexpire" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
            <FIELD NAME="usedflag" TYPE="int" LENGTH="1" DEFAULT="0" NOTNULL="true" SEQUENCE="false"/>

        </FIELDS>
        <KEYS>
            <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
            <KEY NAME="parent_fk" TYPE="foreign" FIELDS="parentid" REFTABLE="user" REFFIELDS="id"/>
            <KEY NAME="child_fk" TYPE="foreign" FIELDS="childrenid" REFTABLE="user" REFFIELDS="id"/>
        </KEYS>
        <INDEXES>
            <INDEX NAME="parentid_idx" UNIQUE="false" FIELDS="parentid"/>
            <INDEX NAME="childrenid_idx" UNIQUE="false" FIELDS="childrenid"/>
        </INDEXES>
    </TABLE>
  </TABLES>
</XMLDB>
